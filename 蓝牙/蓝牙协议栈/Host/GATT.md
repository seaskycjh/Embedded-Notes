GATT



1 简介

1.1 范围

通用属性配置文件（The Generic Attribute Profile，GATT）使用属性协议（ATT）定义了一个服务框架。这个框架定义了服务的过程、格式和特征。过程包括发现（discovering）、读取（reading）、写入（writing）、通知（notifying）和指示（indicating）特征，以及配置广播的特征（characteristic）。

2 概述

2.2 配置和角色

GATT 定义了一下角色：

客户端（Client）：向服务器发起命令和请求的设备，能够接收服务器发送的响应、指示和通知。

服务器（Server）：接受客户端传入命令和请求的设备，并向客户端发送响应、指示和通知。

注意：角色不是固定的，而是在定义过程时确定的，在过程结束后释放。一个设备可以同时扮演这两个角色。

2.4 基础知识

GATT 可以在任何物理链接上使用，使用属性协议 L2CAP 信道（ATT 载波）。以下是客户端和服务器间通信底层通信总结：

- ATT 载波是使用 “信道建立” 来创建的。
- GATT 的角色不绑定到控制器的主/从（master/slave）角色。
- 对于 LE 的物理链接来说，授权、身份验证和加密等安全功能是可选的。
- 对于 GATT 的多字节配置文件来说，先发送最低有效字节（LSB）。

2.5 属性协议

GATT 的数据包包含在属性协议的 PDUs 中。

属性协议 PDU 由 1 个字节的操作码、可变长度的属性参数和可选的 12 字节的认证签名组成。

操作码：包含特定的命令、请求、响应、指示、通知或确认操作码和用于身份验证的标志。

属性参数：包含特定命令或请求的数据，或响应、指示或通知中返回的数据。

身份验证签名是可选的，详见 Vol.3 Part H, 2.4.5。

一个属性由属性句柄（Handle）、属性类型（Type）、属性值（Value）和属性权限（Permission）组成。

2.5.4 UUIDs

16 位的 UUIDs 包含在 2 个字节中，128 位的 UUIDs 包含在 16 个字节中。
